# 8.2. 桌面环境

本节描述如何在 FreeBSD 系统上安装和配置一些流行的桌面环境。 桌面环境可以是简单的窗口管理器，也可以是一整套桌面应用程序。

支持的桌面环境表

| 名称     | 许可证             | 包           |
| ---------- | -------------------- | -------------- |
| KDE 桌面 | GPL 2.0 或更高版本 | x11/kde5     |
| GNOME    | GPL 2.0 或更高版本 | x11/gnome    |
| XFCE     | GPL，LGPL，BSD     | x11-wm/xfce4 |
| MATE     | GPL 2.0，LGPL 2.0  | x11/mate     |
| 肉桂     | GPL 2.0 或更高版本 | x11/肉桂     |
| LXQT     | GPL，LGPL          | x11-wm/lxqt  |

### 8.2.1. KDE Plasma

KDE Plasma 是一款易于使用的桌面环境。这个桌面提供了一套具有一致外观和感觉、标准化菜单和工具栏、键绑定、配色方案、国际化以及集中化、基于对话框驱动的桌面配置的应用程序。有关 KDE 的更多信息，请访问 KDE 主页。有关特定于 FreeBSD 的信息，请在 KDE 处查阅 FreeBSD 主页。

#### 8.2.1.1. 安装 KDE Plasma 元包

要安装带有 KDE 框架、Plasma 桌面和应用程序的 KDE Plasma 元包，请执行：

```
# pkg install kde5
```

#### 8.2.1.2. 最小的 KDE Plasma 安装

要安装最小的 KDE Plasma，请执行：

```
# pkg install plasma5-plasma
```

```
# pkg install konsole
```

#### 8.2.1.3. 配置 KDE Plasma

KDE Plasma 使用 dbus-daemon(1) 作为消息总线和硬件抽象层。此应用程序会自动作为 KDE Plasma 的一个依赖项自动安装。

在 /etc/rc.conf 中启用 D-BUS 服务以便在系统启动时启动：

```
# sysrc dbus_enable="YES"
```

增加消息大小，执行：

```
sysctl net.local.stream.recvspace=65536
sysctl net.local.stream.sendspace=65536
```

#### 8.2.1.4. 启动 KDE Plasma

首选的 KDE Plasma 显示管理器是 x11/sddm。要安装 x11/sddm，请执行：

```
# pkg install sddm
```

在 /etc/rc.conf 中启用 SDDM 服务以在系统启动时启动:

```
# sysrc sddm_enable="YES"
```

可以通过运行以下命令在 SDDM 中设置键盘语言（例如，对于西班牙语）：

```
# sysrc sddm_lang="es_ES"
```

启动 KDE Plasma 的第二种方法是通过手动调用 startx(1)。 为使此方法有效，需要在~/.xinitrc 中添加以下行：

```
% echo "exec dbus-launch --exit-with-x11 ck-launch-session startplasma-x11" > ~/.xinitrc
```

### 8.2.2. GNOME

GNOME 是一個用戶友好型的桌面環境。它包括一個用於啟動應用程序和顯示狀態的面板，一個桌面，一組工具和應用程序，以及一套使應用程序能夠合作並保持一致的慣例。

#### 8.2.2.1. 安裝 GNOME 元包

安装 GNOME 桌面和应用程序的 GNOME 元包，请执行：

```
# pkg install gnome
```

#### 8.2.2.2. 最小的 GNOME 安装

要安装只包含基本功能的精简版 GNOME 桌面的 GNOME-Lite 元包，请执行：

```
# pkg install gnome-lite
```

#### 8.2.2.3. 配置 GNOME

GNOME 需要 /proc 被挂载。将此行添加到 /etc/fstab 中，在系统启动期间自动挂载此文件系统：

```
# Device                Mountpoint      FStype  Options         Dump    Pass#
proc                    /proc           procfs  rw              0       0
```

GNOME 使用 dbus-daemon(1) 作为消息总线和硬件抽象。此应用程序会自动安装为 GNOME 的依赖项。

在 /etc/rc.conf 中启用 D-BUS 服务以在系统启动时启动：

```
# sysrc dbus_enable="YES"
```

#### 8.2.2.4. 启动 GNOME

GNOME 显示管理器是 GNOME 的首选显示管理器。 GDM 安装在 GNOME 软件包中。

在 /etc/rc.conf 中启用 GDM 以在系统启动时启动：

```
# sysrc gdm_enable="YES"
```

启动 GNOME 的第二种方法是通过手动调用 startx(1)。为了使此方法起作用，需要在 ~/.xinitrc 中添加以下行：

```
% echo "exec gnome-session" > ~/.xinitrc
```
